<html>
  <head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script src="//scraperwiki.com/js/scraperwiki.js"></script>
  </head>
  <body>
    <div id=placeholder1>...</div>
    <div id=placeholder2>...</div>
    <script>
      function table(data) {
          text = '<table class=dragon>'
          has_header = 0
          data.forEach(function(row) {
              // make header
              if (has_header == 0) {
                  text = text + '<tr>'
                  Object.keys(row).forEach(function(key) {
                       text=text+'<th>'+key+'</th>'
                  })
                  text = text + '</tr>'
                  has_header = 1
              }
                  
              // output row
              text=text+'<tr>';
              Object.keys(row).forEach(function(key) {
                  text=text+'<td>'+row[key]+'</td>'
              })
              text=text+'</tr>';
          })
          text = text +'</table>';
          return text
      }
      console.log("aa");
      scraperwiki.sql('select sum(hours) as hrs, job from nice group by job order by hrs', 
          function(data, textStatus, jqXHR){;$('#placeholder1').html(table(data))},
          function(jqXHR, textStatus, errorThrown){console.log('foo')}
      );
      
      scraperwiki.sql('select sum(hours) as hrs, job, month from nice group by job, month', 
          function(data, textStatus, jqXHR){;$('#placeholder2').html(table(data))},
          function(jqXHR, textStatus, errorThrown){console.log('foo')}
      );
    </script>
  </body>
</html>
